<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Xiao_shulin</title><meta name="author" content="xiaoshulin"><meta name="copyright" content="xiaoshulin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="算法，数据结构，python">
<meta property="og:type" content="website">
<meta property="og:title" content="Xiao_shulin">
<meta property="og:url" content="https://202030481266.github.io/index.html">
<meta property="og:site_name" content="Xiao_shulin">
<meta property="og:description" content="算法，数据结构，python">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://202030481266.github.io/img/rafy3.jpg">
<meta property="article:author" content="xiaoshulin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://202030481266.github.io/img/rafy3.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://202030481266.github.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Xiao_shulin',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-05-30 15:14:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/loading.gif" data-original="/img/rafy3.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/background.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Xiao_shulin</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Xiao_shulin</h1><div id="site-subtitle"><span id="subtitle"></span></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/30/gcloud-init%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="Windows gcloud init解决方案"><img class="post_bg" src="/img/loading.gif" data-original="https://raw.githubusercontent.com/202030481266/personal-image/main/programmer.png?token=GHSAT0AAAAAACDIJF4IXCPFZXKUAWNDNCQ2ZDVVZ3A" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows gcloud init解决方案"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/30/gcloud-init%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="Windows gcloud init解决方案">Windows gcloud init解决方案</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-05-30T06:12:52.000Z" title="发表于 2023-05-30 14:12:52">2023-05-30</time></span></div><div class="content">gcloud CLI 安装有很多坑，所以这篇文章是我的踩坑记录，仅供参考1 首先必须要有梯子。
2 其次，要使用shadowsocket（SSR，v2ray和clash我试过了，似乎都不行）
使用cmd安装程序可能会出错解决方案：使用powershell，管理员身份运行。
安装过程报各种错误解决方案：压缩包下载不了，网络问题，在安装gcloud CLI的组件的时候需要保持全程无代理即可，也可以选择直连模式。如果是最后的components安装出错，说明网络配置有问题（可能使用了之前的配置，由于卸载没弄干净，导致出错，在C盘下的AppData目录找到一个gcloud文件夹，把它删除了就可以了）
gcloud init的网络检查解决方案：设置全局代理，首先将梯子开到全局模式然后使用下面的命令。
设置http代理为梯子（host,port是你自己梯子的IP地址和端口号，host一般都是 127.0.0.1 ,端口号获取只需要把鼠标移到SSR上就可以看到（比如我的就是12345）。
12set http_proxy=http://host:portset http_proxy=http://h ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/06/Nastry-and-King-shamon/" title="Nastry and King-shamon"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nastry and King-shamon"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/06/Nastry-and-King-shamon/" title="Nastry and King-shamon">Nastry and King-shamon</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-06T15:20:40.000Z" title="发表于 2022-06-06 23:20:40">2022-06-06</time></span></div><div class="content">Nastya and King-Shamans题面翻译给定一个序列 $ai$ ，记其前缀和序列为 $s_i$ ，有 $q$ 个询问，每次单点修改，询问是否存在一个 $i$ 满足 $a_i=s{i-1}$ ，有多解输出任意一个，无解输出 $-1$ 。
感谢@litble 提供翻译
题目描述Nastya likes reading and even spends whole days in a library sometimes. Today she found a chronicle of Byteland in the library, and it stated that there lived shamans long time ago. It is known that at every moment there was exactly one shaman in Byteland, and there were $ n $ shamans in total enumerated with integers from $ 1 $ to $ n $ in the order the ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/05/Experiment/" title="Experiment"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Experiment"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/05/Experiment/" title="Experiment">Experiment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-05T15:20:08.000Z" title="发表于 2022-06-05 23:20:08">2022-06-05</time></span></div><div class="content">Chemistry Experiment题面翻译有$n$支试管，每支试管装有$h_i\ ml$的水银。
$q$次操作，操作有两种：

1 $p$ $x$：倒掉试管$p$的水银修改为$x\ ml$。
2 $v$：将$v\ ml$水任意分配至$n$支试管里，最小化有水的试管中最大体积，输出这个最小值，误差不超过$10^{-4}$算作正确。。这个操作只是一次假想，不会真的把水倒进试管里。

$n,q\le 10^5$，$0\le h_i,x\le 10^9$，$1\le v\le 10^{15}$
题目描述One day two students, Grisha and Diana, found themselves in the university chemistry lab. In the lab the students found $ n $ test tubes with mercury numbered from $ 1 $ to $ n $ and decided to conduct an experiment.
The experiment consists of $ q ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/04/%E8%B4%AA%E5%A9%AA%E7%9A%84%E5%A4%A7%E9%99%86/" title="贪婪的大陆"><img class="post_bg" src="/img/loading.gif" data-original="http://up.36992.com/pic/e6/c5/51/e6c551e768092c8655292d89a4034a74.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪婪的大陆"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/04/%E8%B4%AA%E5%A9%AA%E7%9A%84%E5%A4%A7%E9%99%86/" title="贪婪的大陆">贪婪的大陆</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-04T09:57:44.000Z" title="发表于 2022-06-04 17:57:44">2022-06-04</time></span></div><div class="content">贪婪大陆题目背景面对蚂蚁们的疯狂进攻，小 FF 的 Tower defence 宣告失败……人类被蚂蚁们逼到了 Greed Island 上的一个海湾。现在，小 FF 的后方是一望无际的大海，前方是变异了的超级蚂蚁。小 FF 还有大好前程，他可不想命丧于此， 于是他派遣手下最后一批改造 SCV 布置地雷以阻挡蚂蚁们的进攻。
题目描述小 FF 最后一道防线是一条长度为 $n$ 的战壕，小 FF 拥有无数多种地雷，而 SCV 每次可以在 $[L, R]$ 区间埋放同一种不同于之前已经埋放的地雷。由于情况已经十万火急，小 FF 在某些时候可能会询问你在 $[L’,R’]$ 区间内有多少种不同的地雷，他希望你能尽快的给予答复。
输入格式第一行为两个整数 $n$ 和 $m$，$n$ 表示防线长度，$m$ 表示 SCV 布雷次数及小 FF 询问的次数总和。
接下来有 $m$ 行，每行三个整数 $q,l,r$：

若 $q=1$，则表示 SCV 在 $[l, r]$ 这段区间布上一种地雷；
若 $q=2$，则表示小 FF 询问当前 $[l, r]$ 区间总共有多少种地雷。

输出格式对于小 FF 的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/03/Tree/" title="New Year Tree"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="New Year Tree"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/03/Tree/" title="New Year Tree">New Year Tree</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-03T09:08:44.000Z" title="发表于 2022-06-03 17:08:44">2022-06-03</time></span></div><div class="content">New Year Tree题面翻译
给出一棵 $n$ 个节点的树，根节点为 $1$。每个节点上有一种颜色 $c_i$。$m$ 次操作。操作有两种：
1 u c：将以 $u$ 为根的子树上的所有节点的颜色改为 $c$。
2 u：询问以 $u$ 为根的子树上的所有节点的颜色数量。


$1\le n,m\le 4\times 10^5$，$1\le c_i,c\le 60$。

题目描述The New Year holidays are over, but Resha doesn’t want to throw away the New Year tree. He invited his best friends Kerim and Gural to help him to redecorate the New Year tree.
The New Year tree is an undirected tree with $ n $ vertices and root in the vertex $ 1 $ .
You should process the queries of the t ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/03/%E5%BC%82%E6%88%96%E7%BA%BF%E6%AE%B5%E6%A0%91/" title="XOR on Segment"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="XOR on Segment"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/03/%E5%BC%82%E6%88%96%E7%BA%BF%E6%AE%B5%E6%A0%91/" title="XOR on Segment">XOR on Segment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-06-03T01:44:38.000Z" title="发表于 2022-06-03 09:44:38">2022-06-03</time></span></div><div class="content">XOR on Segment题目描述
给定 $n$ 个数的序列 $a$。$m$ 次操作，操作有两种：
求 $\displaystyle\sum_{i=l}^r a_i$。
把 $a_l\sim a_r$ 异或上 $x$。


$1\le n\le 10^5$，$1\le m\le 5\times 10^4$，$0\le a_i\le 10^6$，$1\le x\le 10^6$。

题目描述You’ve got an array $ a $ , consisting of $ n $ integers $ a{1},a{2},…,a_{n} $ . You are allowed to perform two operations on this array:

Calculate the sum of current array elements on the segment $ [l,r] $ , that is, count value $ a{l}+a{l+1}+…+a_{r} $ .
Apply the xor operation with a given number $  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%80%E7%AB%A0/" title="计算机网络知识点复习第一章"><img class="post_bg" src="/img/loading.gif" data-original="https://img-blog.csdnimg.cn/eb2ecc5aca734fc4bd30947159a3cf02.jpeg#pic_center" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络知识点复习第一章"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0%E7%AC%AC%E4%B8%80%E7%AB%A0/" title="计算机网络知识点复习第一章">计算机网络知识点复习第一章</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-05-31T07:38:32.000Z" title="发表于 2022-05-31 15:38:32">2022-05-31</time></span></div><div class="content">下面是推荐食用的教材，也是本博客内容的知识点来源参考。

1.1 互联网基本知识介绍：

**主机（host, 端系统, end system）：电脑，手机，网络等等终端设备。**
**端系统通过通信链路和分组交换机连接到一起**
**分组交换机：路由器(router)，链路层交换机(link-layer switch)。**
**通信链路：一些信号传输的媒体，比如光纤，铜线，电缆，卫星无线电道等等。**
- **协议（protocol）：TCP,IP,UDP等等，控制网络的行为。**
- **分组（package）：端系统发送的信息包。**
- **因特网标准：指定的标准，比如IETF,RFC。**
- **因特网服务供应商（ISP）：端系统通过ISP接入互联网。**



下面是英文的解释：
![在这里插入图片描述](https://img-blog.csdnimg.cn/39a7359406334fcd849f0d3544a42f27.png#pic_center)
![在这里插入图片描述](https://img-blog.csdnimg.cn/2684fb9e72864d48 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/30/%E7%BB%B4%E6%8A%A4%E5%BA%8F%E5%88%97/" title="维护序列"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="维护序列"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/30/%E7%BB%B4%E6%8A%A4%E5%BA%8F%E5%88%97/" title="维护序列">维护序列</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-05-30T01:44:38.000Z" title="发表于 2022-05-30 09:44:38">2022-05-30</time></span></div><div class="content">[AHOI2009] 维护序列题目背景老师交给小可可一个维护数列的任务，现在小可可希望你来帮他完成。
题目描述有一个长为 $n$ 的数列 ${a_n}$，有如下三种操作形式：

格式 1 t g c，表示把所有满足 $t\le i\le g$ 的 $a_i$ 改为 $a_i\times c$ ;
格式 2 t g c 表示把所有满足 $t\le i\le g$ 的 $a_i$ 改为 $a_i+c$ ;
格式 3 t g 询问所有满足 $t\le i\le g$ 的 $a_i$ 的和，由于答案可能很大，你只需输出这个数模 $p$ 的值。

输入格式第一行两个整数 $n$ 和 $p$。
第二行含有 $n$ 个非负整数，表示数列 ${a_i}$ 。
第三行有一个整数 $m$，表示操作总数。
从第四行开始每行描述一个操作，同一行相邻两数之间用一个空格隔开，每行开头和末尾没有多余空格。
输出格式对每个操作 3，按照它在输入中出现的顺序，依次输出一行一个整数表示询问结果。
样例 #1样例输入 #1123456787 431 2 3 4 5 6 751 2 5 53 2 42 3 7 93 1 33 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/28/%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0/" title="区间和的个数"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/5j0glo1h.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="区间和的个数"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/28/%E5%8C%BA%E9%97%B4%E5%92%8C%E7%9A%84%E4%B8%AA%E6%95%B0/" title="区间和的个数">区间和的个数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-05-28T05:08:33.000Z" title="发表于 2022-05-28 13:08:33">2022-05-28</time></span></div><div class="content">题目给你一个整数数组 $nums$ 以及两个整数 $lower$ 和 $upper$ 。求数组中，值位于范围 $[lower, upper]$ （包含 $lower$ 和 $upper$）之内的 区间和的个数 

思路从左往右边扫描，记录每一个位置的前缀和，比如现在的位置为$k$,然后对于满足区间右端点的在此位置k,寻找$[0,k-1]$中满足条件的左端点。
显然，只要 满足条件：

$$sum_k-upper \le sum_i \le sum_k-lower$$

所以，我们只需要动态维护前缀和就可以了。使用树状数组维护前缀和。但是由于这里的值域很大，所以要进行离散化，因为只关心大小比较，所以把全部要用到的数字全部放到一个数组里面进行离散化？然后就可以了？

123456789101112131415161718192021222324252627282930313233343536373839404142class Solution &#123;public:    typedef long long ll;    ll lowbit(ll x) &#123; return x& ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/28/%E5%8A%9B%E6%89%A3315-%E8%AE%A1%E7%AE%97%E5%8F%B3%E8%BE%B9%E5%B0%8F%E4%BA%8E%E5%BD%93%E5%89%8D%E6%95%B0%E7%9A%84%E4%B8%AA%E6%95%B0/" title="力扣315-计算右边小于当前数的个数"><img class="post_bg" src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/5j0glo1h.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="力扣315-计算右边小于当前数的个数"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/28/%E5%8A%9B%E6%89%A3315-%E8%AE%A1%E7%AE%97%E5%8F%B3%E8%BE%B9%E5%B0%8F%E4%BA%8E%E5%BD%93%E5%89%8D%E6%95%B0%E7%9A%84%E4%B8%AA%E6%95%B0/" title="力扣315-计算右边小于当前数的个数">力扣315-计算右边小于当前数的个数</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-05-27T17:45:50.000Z" title="发表于 2022-05-28 01:45:50">2022-05-28</time></span></div><div class="content">题目 给你一个整数数组 nums ，按要求返回一个新数组 counts 。数组 counts 有该性质： counts[i] 的值是  nums[i] 右侧小于 nums[i] 的元素的数量 

思路很简单，这里实际上寻找的就是一个逆序对的问题，所以有很多的解法： 


树状数组
归并排序
权值线段树



实际上，我用树状数组，把原来的数组逆序过后，不就变成了正序的问题？然后看一下数据范围，果然有负数，还挺大的，那么离散化一下不就完了吗？

1234567891011121314151617181920212223242526272829303132333435363738394041class Solution &#123;public:    struct edge &#123;        int x, y;        bool operator&lt;(const edge &amp;rhs) const  &#123;            if(rhs.x==x) return y&lt;rhs.y;            else return x&lt;rhs. ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/loading.gif" data-original="/img/rafy3.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">xiaoshulin</div><div class="author-info__description">算法，数据结构，python</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/30/gcloud-init%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="Windows gcloud init解决方案"><img src="/img/loading.gif" data-original="https://raw.githubusercontent.com/202030481266/personal-image/main/programmer.png?token=GHSAT0AAAAAACDIJF4IXCPFZXKUAWNDNCQ2ZDVVZ3A" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows gcloud init解决方案"/></a><div class="content"><a class="title" href="/2023/05/30/gcloud-init%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" title="Windows gcloud init解决方案">Windows gcloud init解决方案</a><time datetime="2023-05-30T06:12:52.000Z" title="发表于 2023-05-30 14:12:52">2023-05-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/06/Nastry-and-King-shamon/" title="Nastry and King-shamon"><img src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nastry and King-shamon"/></a><div class="content"><a class="title" href="/2022/06/06/Nastry-and-King-shamon/" title="Nastry and King-shamon">Nastry and King-shamon</a><time datetime="2022-06-06T15:20:40.000Z" title="发表于 2022-06-06 23:20:40">2022-06-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/05/Experiment/" title="Experiment"><img src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Experiment"/></a><div class="content"><a class="title" href="/2022/06/05/Experiment/" title="Experiment">Experiment</a><time datetime="2022-06-05T15:20:08.000Z" title="发表于 2022-06-05 23:20:08">2022-06-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/04/%E8%B4%AA%E5%A9%AA%E7%9A%84%E5%A4%A7%E9%99%86/" title="贪婪的大陆"><img src="/img/loading.gif" data-original="http://up.36992.com/pic/e6/c5/51/e6c551e768092c8655292d89a4034a74.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪婪的大陆"/></a><div class="content"><a class="title" href="/2022/06/04/%E8%B4%AA%E5%A9%AA%E7%9A%84%E5%A4%A7%E9%99%86/" title="贪婪的大陆">贪婪的大陆</a><time datetime="2022-06-04T09:57:44.000Z" title="发表于 2022-06-04 17:57:44">2022-06-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/03/Tree/" title="New Year Tree"><img src="/img/loading.gif" data-original="https://cdn.luogu.com.cn/upload/image_hosting/tpz2fj0g.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="New Year Tree"/></a><div class="content"><a class="title" href="/2022/06/03/Tree/" title="New Year Tree">New Year Tree</a><time datetime="2022-06-03T09:08:44.000Z" title="发表于 2022-06-03 17:08:44">2022-06-03</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/google-cloud-bugs/" style="font-size: 1.1em; color: #999">google cloud, bugs</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.1em; color: #999">算法 数据结构</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/06/"><span class="card-archive-list-date">六月 2022</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">五月 2022</span><span class="card-archive-list-count">14</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">20</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-05-30T07:14:41.001Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By xiaoshulin</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    window.typed = new Typed("#subtitle", {
      strings: ["你在抱怨什么呢","为明天到来的事，说人生像是没有意义","没有选择会是唯一的路","这不是你自己的问题，人终归要好好去生活"],
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '你在抱怨什么呢'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>